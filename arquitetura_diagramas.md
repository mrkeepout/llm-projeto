# ARQUITETURA E DIAGRAMAS DO SISTEMA

---

## 1. FLUXO GERAL DO PROJETO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FASE 1: PREPARAÃ‡ÃƒO                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Coletar     â”‚      â”‚ Analisar     â”‚      â”‚ Processar   â”‚ â”‚
â”‚  â”‚ Dados de    â”‚â”€â”€â”€â”€â–¶ â”‚ DistribuiÃ§Ã£o â”‚â”€â”€â”€â”€â–¶ â”‚ e Limpar    â”‚ â”‚
â”‚  â”‚ SaÃºde PÃºb.  â”‚      â”‚ de Dados     â”‚      â”‚ Dados       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â†“ Complexidade: O(n Ã— m)                                â”‚
â”‚    ~1250 exemplos                                              â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FASE 2: TREINAMENTO                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â”‚   Carregar Modelo Base (LLaMA 2)     â”‚               â”‚
â”‚        â”‚   7 BilhÃµes de ParÃ¢metros            â”‚               â”‚
â”‚        â”‚   Complexidade: O(1) para carregar   â”‚               â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                     â”‚                                           â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â”‚   Aplicar LoRA                       â”‚               â”‚
â”‚        â”‚   Reduz a 13M parÃ¢metros             â”‚               â”‚
â”‚        â”‚   Economia: 95% de memÃ³ria!          â”‚               â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                     â”‚                                           â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â”‚   Fine-tuning (3 Ã©pocas)             â”‚               â”‚
â”‚        â”‚   Seu dataset (1250 exemplos)        â”‚               â”‚
â”‚        â”‚   Complexidade: O(E Ã— N Ã— M Ã— DÂ²)    â”‚               â”‚
â”‚        â”‚   Tempo: ~45 min em GPU moderna      â”‚               â”‚
â”‚        â”‚   SaÃ­da: Modelo especializado        â”‚               â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                     â”‚                                           â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â”‚   ValidaÃ§Ã£o e Teste                  â”‚               â”‚
â”‚        â”‚   Avaliar em dados separados         â”‚               â”‚
â”‚        â”‚   CÃ¡lculo de mÃ©tricas                â”‚               â”‚
â”‚        â”‚   (BLEU, ROUGE, AcurÃ¡cia)            â”‚               â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                     â†“                                           â”‚
â”‚        Modelo treinado salvo em disco                           â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FASE 3: IMPLANTAÃ‡ÃƒO                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              CAMADA DE APRESENTAÃ‡ÃƒO                      â”‚ â”‚
â”‚  â”‚  Interface Web (HTML5 + JavaScript + CSS)               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ [Input: Pergunta] [BotÃ£o Enviar]                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ Chat Box (Respostas anteriores)             â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                      â†‘ HTTP POST/GET                     â”‚ â”‚
â”‚  â”‚                      â”‚                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              CAMADA DE APLICAÃ‡ÃƒO                         â”‚ â”‚
â”‚  â”‚  FastAPI Server (Python) - Roda em http://localhost:8000â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚ @app.post(\"/api/responder\")                      â”‚â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ Recebe: {\"pergunta\": \"...\"}                â”‚â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ Processa com modelo LLM                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€ Retorna: {\"resposta\": \"...\", \"tempo\": ...}â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                    â”‚â”‚ â”‚
â”‚  â”‚  â”‚ Complexidade de resposta: O(n Ã— dÂ²)              â”‚â”‚ â”‚
â”‚  â”‚  â”‚ Tempo: 2-5 segundos por pergunta                 â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚                      â†‘ GPU/CPU                          â”‚ â”‚
â”‚  â”‚                      â”‚                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           CAMADA DE MODELO                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚ LLaMA 2 7B (7 bilhÃµes parÃ¢metros)                 â”‚â”‚ â”‚
â”‚  â”‚  â”‚ + LoRA Adapters (13M parÃ¢metros especializados)   â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                    â”‚â”‚ â”‚
â”‚  â”‚  â”‚ Processamento:                                     â”‚â”‚ â”‚
â”‚  â”‚  â”‚ 1. TokenizaÃ§Ã£o (O(n))                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚ 2. Embedding (O(n Ã— d))                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚ 3. Transformer Layers (O(nÂ² Ã— d))                 â”‚â”‚ â”‚
â”‚  â”‚  â”‚ 4. GeraÃ§Ã£o autoregressiva (O(m Ã— dÂ²))             â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                    â”‚â”‚ â”‚
â”‚  â”‚  â”‚ MemÃ³ria: 6-8GB (com LoRA e quantizaÃ§Ã£o)           â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ARQUITETURA DO TRANSFORMER

```
Pergunta de entrada: "Como prevenir dengue?"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         TOKENIZAÃ‡ÃƒO E EMBEDDING                      â”‚
â”‚  Palavra â†’ Token â†’ NÃºmero â†’ Vetor (4096 dim)       â”‚
â”‚                                                     â”‚
â”‚  "Como" â†’ [103, 2089, 567, ..., 234]               â”‚
â”‚  (cada nÃºmero Ã© um valor de 1 a 32000)             â”‚
â”‚  Depois: converte para vetor de 4096 dimensÃµes     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      POSITIONAL ENCODING                            â”‚
â”‚  Adiciona informaÃ§Ã£o de posiÃ§Ã£o dos tokens          â”‚
â”‚  "Como" (posiÃ§Ã£o 1) vs "prevenir" (posiÃ§Ã£o 2)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ 32 TRANSFORMER LAYERS (em sÃ©rie)   â”‚
     â”‚ (Cada um aplica a mesma operaÃ§Ã£o)  â”‚
     â”‚                                    â”‚
     â–¼                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 1: SELF-ATTENTION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ "Como prevenir dengue?"                            â”‚
â”‚  â†“      â†“       â†“      â†“  (4 tokens)               â”‚
â”‚                                                     â”‚
â”‚ Multi-Head Attention (8 heads em paralelo):        â”‚
â”‚                                                     â”‚
â”‚ Head 1: Encontra relaÃ§Ãµes semÃ¢nticas              â”‚
â”‚ Head 2: Encontra relacionamentos gramaticais      â”‚
â”‚ Head 3: Encontra estrutura geral                  â”‚
â”‚ ...                                                â”‚
â”‚ Head 8: Encontra nuances especÃ­ficas              â”‚
â”‚                                                     â”‚
â”‚ Complexidade: O(nÂ²) onde n = 4 tokens            â”‚
â”‚             = 16 operaÃ§Ãµes por head Ã— 8 heads    â”‚
â”‚             â‰ˆ 128 operaÃ§Ãµes                       â”‚
â”‚                                                     â”‚
â”‚ Cada token tem acesso a informaÃ§Ã£o de todos      â”‚
â”‚ os outros tokens (atenÃ§Ã£o ponderada)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FEED-FORWARD NETWORK                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Rede neural densa por token                      â”‚
â”‚ Aplicada a cada representaÃ§Ã£o de token           â”‚
â”‚ Adiciona nÃ£o-linearidade (ReLU)                  â”‚
â”‚ Complexidade: O(n Ã— dÂ²)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼ (Repete para Layer 2 atÃ© Layer 32)
                 â”‚
             ... (mais layers) ...
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OUTPUT LAYER FINAL                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Linear transformation: 4096 dimensÃµes â†’ 32000    â”‚
â”‚ (tamanho do vocabulÃ¡rio)                         â”‚
â”‚                                                  â”‚
â”‚ Softmax: converte para probabilidades            â”‚
â”‚                                                  â”‚
â”‚ Output para cada posiÃ§Ã£o:                        â”‚
â”‚ P(token_1 | contexto anterior)                  â”‚
â”‚ P(token_2 | contexto anterior + token_1)        â”‚
â”‚ ...                                              â”‚
â”‚                                                  â”‚
â”‚ PrÃ³ximo token com maior probabilidade:           â”‚
â”‚ "Para" (prob: 0.87)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PrÃ³ximo token:   â”‚
        â”‚ "Para prevenir"  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Repetir atÃ©:                 â”‚
        â”‚ - Max tokens atingido, ou    â”‚
        â”‚ - Token de FIM gerado, ou    â”‚
        â”‚ - Outra condiÃ§Ã£o de parada   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Resposta Final:                    â”‚
        â”‚ "Para prevenir dengue:             â”‚
        â”‚  1. Elimine focos de Ã¡gua          â”‚
        â”‚  2. Use repelente                  â”‚
        â”‚  3. Mantenha local limpo"          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESUMO COMPLEXIDADE TOTAL:
- n = 4 (tokens entrada)
- m = 100 (tokens saÃ­da)
- d = 4096 (dimensÃ£o)
- L = 32 (layers)

Complexidade: O(L Ã— (nÂ² Ã— d + n Ã— dÂ² Ã— m))
           = O(32 Ã— (16 Ã— 4096 + 4 Ã— 16M Ã— 100))
           â‰ˆ O(1 bilhÃ£o de operaÃ§Ãµes)

Em GPU V100: ~5 segundos
Em GPU A100: ~2 segundos
Em CPU: ~30 segundos
```

---

## 3. COMPARAÃ‡ÃƒO: COM E SEM LoRA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 FINE-TUNING COMPLETO (Sem LoRA)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Modificar TODOS os parÃ¢metros:                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Camada 1: 4096 Ã— 4096 = 16.7 milhÃµes parÃ¢metros      â”‚ â”‚
â”‚  â”‚ Camada 2: 4096 Ã— 4096 = 16.7 milhÃµes parÃ¢metros      â”‚ â”‚
â”‚  â”‚ ...                                                    â”‚ â”‚
â”‚  â”‚ Total: â‰ˆ 7 BILHÃ•ES de parÃ¢metros!                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  MemÃ³ria necessÃ¡ria:                                          â”‚
â”‚  7B parÃ¢metros Ã— 4 bytes = 28 GB para pesos                â”‚
â”‚  + 28 GB para gradientes                                    â”‚
â”‚  + 28 GB para otimizador (Adam)                             â”‚
â”‚  = 84 GB total                                              â”‚
â”‚                                                               â”‚
â”‚  Tempo de treinamento: ~450 minutos (7.5 horas)             â”‚
â”‚  Velocidade: 1 Ã©pocas/hora                                   â”‚
â”‚                                                               â”‚
â”‚  Custo GPU: $100+ para 8 horas                              â”‚
â”‚                                                               â”‚
â”‚  âŒ NÃƒO RECOMENDADO PARA GRUPO DE ESTUDANTES               â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FINE-TUNING COM LoRA (Recomendado)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Adicionar apenas ADAPTADORES:                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Em vez de modificar: 4096 Ã— 4096                      â”‚ â”‚
â”‚  â”‚ Apenas atualiza: 2 matrizes de (4096 Ã— 16)            â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ ParÃ¢metros por layer:                                 â”‚ â”‚
â”‚  â”‚ Matriz A: 4096 Ã— 16 = 65.536 parÃ¢metros             â”‚ â”‚
â”‚  â”‚ Matriz B: 16 Ã— 4096 = 65.536 parÃ¢metros             â”‚ â”‚
â”‚  â”‚ Total por layer: 131.072 parÃ¢metros                   â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ 100 layers Ã— 131k = 13.1 MILHÃ•ES parÃ¢metros           â”‚ â”‚
â”‚  â”‚ (vs 7 BILHÃ•ES sem LoRA)                               â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ ReduÃ§Ã£o: 7B â†’ 13M = 99.8% menos parÃ¢metros! âœ…       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  MemÃ³ria necessÃ¡ria:                                          â”‚
â”‚  13M Ã— 4 bytes = 52 MB para pesos LoRA                      â”‚
â”‚  + 7B Ã— 0.5 bytes = 3.5 GB para modelo base (quantizado)   â”‚
â”‚  + 52 MB Ã— 4 (gradientes) = 208 MB                          â”‚
â”‚  + 52 MB Ã— 4 (otimizador) = 208 MB                          â”‚
â”‚  = ~4 GB total                                              â”‚
â”‚                                                               â”‚
â”‚  Tempo de treinamento: ~45 minutos                           â”‚
â”‚  (10x MAIS RÃPIDO que sem LoRA)                             â”‚
â”‚  Velocidade: 4 Ã©pocas/hora                                   â”‚
â”‚                                                               â”‚
â”‚  Custo GPU: $5-10 para 1 hora (ou grÃ¡tis em Colab)         â”‚
â”‚                                                               â”‚
â”‚  âœ… PERFETTO PARA GRUPO DE ESTUDANTES!                      â”‚
â”‚  âœ… Executa em GPU de 8GB                                   â”‚
â”‚  âœ… Resultados comparÃ¡veis ao fine-tuning completo          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COMPARAÃ‡ÃƒO LADO A LADO:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ©trica         â”‚ Sem LoRA          â”‚ Com LoRA           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MemÃ³ria         â”‚ 84 GB             â”‚ 4 GB (â†“95%)       â”‚
â”‚ Tempo           â”‚ 450 min           â”‚ 45 min (â†“10x)     â”‚
â”‚ ParÃ¢metros      â”‚ 7 bilhÃµes         â”‚ 13 milhÃµes (â†“535x)â”‚
â”‚ GPU necessÃ¡ria  â”‚ V100/A100         â”‚ RTX3080/Colab     â”‚
â”‚ Custo           â”‚ $100+             â”‚ $5-10/grÃ¡tis      â”‚
â”‚ Qualidade       â”‚ 100%              â”‚ 98-99%            â”‚
â”‚ Recomendado?    â”‚ âŒ NÃƒO            â”‚ âœ… SIM!           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. FLUXO DE DADOS - DO USUÃRIO ATÃ‰ RESPOSTA

```
USUÃRIO DIGITA PERGUNTA:
"Qual Ã© o perÃ­odo de incubaÃ§Ã£o da dengue?"

    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND (HTML/JavaScript)              â”‚
â”‚                                         â”‚
â”‚ Event Listener detecta Enter            â”‚
â”‚ Captura texto do input                  â”‚
â”‚ Cria JSON: {                            â”‚
â”‚   "pergunta": "Qual Ã© o perÃ­odo...",    â”‚
â”‚   "max_tokens": 512,                    â”‚
â”‚   "temperature": 0.7                    â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ HTTP POST Request       â”‚
      â”‚ /api/responder          â”‚
      â”‚ localhost:8000          â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND (FastAPI)                       â”‚
â”‚                                         â”‚
â”‚ 1. Recebe request JSON                  â”‚
â”‚ 2. Valida com Pydantic                  â”‚
â”‚    âœ“ pergunta Ã© string                  â”‚
â”‚    âœ“ max_tokens Ã© int                   â”‚
â”‚ 3. Log da requisiÃ§Ã£o                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROCESSAMENTO (Pipeline NLP)            â”‚
â”‚                                         â”‚
â”‚ 1. TokenizaÃ§Ã£o:                         â”‚
â”‚    "Qual" â†’ token 1234                  â”‚
â”‚    "Ã©" â†’ token 5678                     â”‚
â”‚    ... (cada palavra â†’ nÃºmero)          â”‚
â”‚    Resultado: [1234, 5678, ..., 9999]  â”‚
â”‚    Complexidade: O(n Ã— log k)          â”‚
â”‚                                         â”‚
â”‚ 2. PreparaÃ§Ã£o para modelo:              â”‚
â”‚    Padding atÃ© 2048 tokens              â”‚
â”‚    Criar attention mask                 â”‚
â”‚    Mover para GPU                       â”‚
â”‚    Complexidade: O(n)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MODELO LLM (LLaMA 2 + LoRA)             â”‚
â”‚                                         â”‚
â”‚ Forward Pass (32 layers de Transformer) â”‚
â”‚                                         â”‚
â”‚ Layer 1:                                â”‚
â”‚   â”œâ”€ Self-Attention: O(nÂ²)             â”‚
â”‚   â””â”€ Feed-Forward: O(n Ã— dÂ²)           â”‚
â”‚                                         â”‚
â”‚ Layer 2-32:                            â”‚
â”‚   â”œâ”€ Self-Attention: O(nÂ²)             â”‚
â”‚   â””â”€ Feed-Forward: O(n Ã— dÂ²)           â”‚
â”‚                                         â”‚
â”‚ GeraÃ§Ã£o Autoregressiva:                â”‚
â”‚   Token 1: prob = [0.02, 0.15, ...] â”€â”€â”€â”
â”‚   Seleciona maior: "O"                 â”‚
â”‚                                         â”‚
â”‚   Token 2: "perÃ­odo" â†’ "de" â†’â”         â”‚
â”‚   "incubaÃ§Ã£o"                â”‚         â”‚
â”‚                              â”‚         â”‚
â”‚   AtÃ©: <EOS> ou max_tokens  â”‚         â”‚
â”‚                                         â”‚
â”‚ Complexidade total: O(m Ã— nÂ² Ã— d)     â”‚
â”‚ Tempo: ~3 segundos (GPU modern)        â”‚
â”‚                                         â”‚
â”‚ Output: Lista de tokens                â”‚
â”‚ [234, 567, 890, 123, ...]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PÃ“S-PROCESSAMENTO                       â”‚
â”‚                                         â”‚
â”‚ 1. DetokenizaÃ§Ã£o:                       â”‚
â”‚    [234, 567, 890, ...] â†’              â”‚
â”‚    "O perÃ­odo de incubaÃ§Ã£o da dengue"   â”‚
â”‚    "normalmente varia de 3 a 14 dias"   â”‚
â”‚                                         â”‚
â”‚ 2. Limpeza:                             â”‚
â”‚    Remove tokens especiais               â”‚
â”‚    Remove duplicate espaÃ§os              â”‚
â”‚    Capitaliza primeira letra             â”‚
â”‚                                         â”‚
â”‚ 3. ValidaÃ§Ã£o:                           â”‚
â”‚    Verifica se Ã© resposta vÃ¡lida        â”‚
â”‚                                         â”‚
â”‚ Complexidade: O(m)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RETORNO DO BACKEND                      â”‚
â”‚                                         â”‚
â”‚ HTTP 200 OK                             â”‚
â”‚ Content-Type: application/json          â”‚
â”‚                                         â”‚
â”‚ {                                       â”‚
â”‚   "pergunta": "Qual Ã© o perÃ­odo...",    â”‚
â”‚   "resposta": "O perÃ­odo de incubaÃ§Ã£o   â”‚
â”‚               da dengue normalmente...  â”‚
â”‚   "tempo_processamento": 3.2,           â”‚
â”‚   "modelo": "LLaMA 2 7B + LoRA"        â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ HTTP Response               â”‚
      â”‚ Enviado para frontend       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND RENDERIZA RESPOSTA             â”‚
â”‚                                         â”‚
â”‚ JavaScript processa JSON                â”‚
â”‚ Extrai campo "resposta"                 â”‚
â”‚ Cria elemento de chat                   â”‚
â”‚ Adiciona Ã  div "chatContainer"          â”‚
â”‚ Scroll automÃ¡tico para novo mensagem    â”‚
â”‚                                         â”‚
â”‚ Renderizado para o usuÃ¡rio:             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ [Bot]                        â”‚       â”‚
â”‚ â”‚ "O perÃ­odo de incubaÃ§Ã£o da   â”‚       â”‚
â”‚ â”‚  dengue normalmente varia    â”‚       â”‚
â”‚ â”‚  de 3 a 14 dias..."          â”‚       â”‚
â”‚ â”‚                              â”‚       â”‚
â”‚ â”‚ â±ï¸ 3.2s                      â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USUÃRIO VÃŠ A RESPOSTA âœ…
TOTAL DE TEMPO: ~3-5 segundos
COMPLEXIDADE: O(m Ã— nÂ² Ã— d + m + n Ã— log k)
```

---

## 5. ANÃLISE DE COMPLEXIDADE - RESUMO VISUAL

```
OPERAÃ‡ÃƒO                    COMPLEXIDADE    TEMPO (s)    MEMÃ“RIA (MB)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TokenizaÃ§Ã£o                 O(nÃ—log k)      0.01s        50
Embedding                   O(nÃ—d)          0.05s        200
Self-Attention              O(nÂ²Ã—d)         0.5s         1000
Feed-Forward                O(nÃ—dÂ²)         0.8s         2000
32 Transformer Layers       O(LÃ—nÂ²Ã—d)       2.0s         5000
GeraÃ§Ã£o (500 tokens)        O(mÃ—nÂ²Ã—d)       1.5s         3000
DetokenizaÃ§Ã£o              O(m)            0.01s         100
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL                       O(mÃ—nÂ²Ã—d)      ~3.5s        ~6GB

Onde:
n = comprimento entrada (4-512 tokens)
m = comprimento saÃ­da (atÃ© 512 tokens)
d = dimensÃ£o do modelo (4096)
k = tamanho vocabulÃ¡rio (32000)
L = nÃºmero de layers (32)

SEM OTIMIZAÃ‡Ã•ES:
- MemÃ³ria: 28 GB
- Tempo: 15+ segundos
- Modelo: Treinamento impossÃ­vel para estudantes

COM LoRA:
- MemÃ³ria: 4 GB âœ…
- Tempo: 3-5 segundos âœ…
- Modelo: Treinamento possÃ­vel! âœ…
```

---

## 6. PIPELINE DE TREINAMENTO - DETALHADO

```
EPOCH 1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Batch 1 (4 exemplos)                                        â”‚
â”‚ â”œâ”€ Forward pass: O(4 Ã— nÂ² Ã— d)                             â”‚
â”‚ â”œâ”€ Calcular loss (BCE com LoRA)                            â”‚
â”‚ â”œâ”€ Backward pass: O(4 Ã— nÂ² Ã— d)                            â”‚
â”‚ â””â”€ Update pesos LoRA: O(13M)                               â”‚
â”‚                                                             â”‚
â”‚ Loss: 2.8 | Perplexidade: 16.4                            â”‚
â”‚ Tempo: 8 segundos                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Batch 2 (4 exemplos)                                        â”‚
â”‚ â”œâ”€ Forward pass: O(4 Ã— nÂ² Ã— d)                             â”‚
â”‚ â”œâ”€ Backward pass: O(4 Ã— nÂ² Ã— d)                            â”‚
â”‚ â””â”€ Update pesos LoRA                                        â”‚
â”‚                                                             â”‚
â”‚ Loss: 2.6 | Perplexidade: 13.5                            â”‚
â”‚ Tempo: 8 segundos                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[... repetir por todos os ~312 batches da Ã©poca ...]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ValidaÃ§Ã£o apÃ³s Epoch 1                                      â”‚
â”‚ â”œâ”€ Testar em 150 exemplos                                   â”‚
â”‚ â”œâ”€ Calcular loss no conjunto de validaÃ§Ã£o                   â”‚
â”‚ â””â”€ Salvar checkpoint se melhore                            â”‚
â”‚                                                             â”‚
â”‚ Val Loss: 2.2 | Val Perplexidade: 9.0                     â”‚
â”‚ Tempo: 2 minutos                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EPOCH 2 (Similar, comeÃ§ando do peso anterior)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Training...                                                 â”‚
â”‚ Loss: 1.5 | Perplexidade: 4.5                             â”‚
â”‚ ValidaÃ§Ã£o: Val Loss: 1.2 | Perplexidade: 3.3              â”‚
â”‚ Tempo: 15 minutos                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EPOCH 3
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Training...                                                 â”‚
â”‚ Loss: 0.9 | Perplexidade: 2.5                             â”‚
â”‚ ValidaÃ§Ã£o: Val Loss: 0.8 | Perplexidade: 2.2              â”‚
â”‚ Tempo: 15 minutos                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TOTAL TREINAMENTO: ~45 minutos           â”‚
â”‚ Modelo salvo: modelo_saude_publica.pth   â”‚
â”‚ Pronto para usar!                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GRÃFICO DE LOSS DURANTE TREINAMENTO:

Loss
  â”‚
3 â”‚ â•±
  â”‚â•± Epoch 1
2 â”‚  â•±
  â”‚ â•± Epoch 2
1 â”‚â•±
  â”‚ â•± Epoch 3
0 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ IteraÃ§Ãµes
  0    10   20   30   40   50  (em unidades de 100)
  
Vemos: Loss diminui = modelo estÃ¡ aprendendo!
```

---

## 7. MÃ‰TRICA DE PERPLEXIDADE EXPLICADA

```
Perplexidade mede: "QuÃ£o perdido o modelo fica?"

Exemplo: Dataset com 3 tokens possÃ­veis [A, B, C]

MODELO 1 - Perplexidade 1 (PERFEITO):
â”œâ”€ P(token correto) = 1.0
â””â”€ Perplexidade = 1.0^(-1) = 1
   InterpretaÃ§Ã£o: Modelo tem 100% certeza sempre

MODELO 2 - Perplexidade 3 (MÃ‰DIO):
â”œâ”€ P(token correto) â‰ˆ 0.33 em mÃ©dia
â””â”€ Perplexidade = (1/0.33) = 3
   InterpretaÃ§Ã£o: "Em mÃ©dia, Ã© como se tivesse 3 opÃ§Ãµes"

MODELO 3 - Perplexidade 5 (RUIM):
â”œâ”€ P(token correto) â‰ˆ 0.2 em mÃ©dia
â””â”€ Perplexidade = (1/0.2) = 5
   InterpretaÃ§Ã£o: "Em mÃ©dia, Ã© como se tivesse 5 opÃ§Ãµes"

SEU PROJETO:
Initial (modelo base): Perplexidade â‰ˆ 8-10
Depois fine-tuning: Perplexidade â‰ˆ 2-3 (Melhoria 4-5x!)

Isso significa: Modelo passa de "perdido" para "confiante"
```

---

Consulte o documento `pesquisa_LLM_saude.md` para mais detalhes! ğŸš€

